---
layout: post
title: "高性能javascript笔记：第4章 算法和流程控制"
description: ""
category: js
tags: [Javascript]
---
{% include JB/setup %}

##第4章 算法和流程控制

###4.2 条件语句
通常来说，if-else适用于判断两个离散值或几个不同的值域。当判断多于两个离散值时，switch语句是更佳选择。

**优化if-else**
最简单的优化方法是确保最可能出现的条件放在首位。if-else中的条件语句应该总是按照从最大概率到最小概率的顺序排列，以确保运行速度最快。

另一种减少条件判断次数的方法是把if-else组成一系列嵌套的if-else语句。这个方法非常适用于有多个值域需要测试的时候（如果是离散值，那么switch语句更为适合）。

**查找表**
当有大量离散值需要测试时，if-else和switch都比使用查找表慢很多。Javascript中可以用数组和普通对象来构造查找表，通过查找表访问数据比用if-else或switch快很多，特别是在条件语句数量很大的时候，而且有时代码可读性也更好。

###4.3 递归
递归函数的潜在问题是终止条件不明确或缺少终止条件会导致函数长时间运行，并使得用户界面处于假死状态。而且，递归函数还可能遇到浏览器的“调用栈大小限制”。

**递归模式**
最常见的导致栈溢出的原因是不正确的终止条件，因此定位模式错误的第一步是验证终止条件。如果终止条件没问题，那么可能是算法中包含了太多层递归，为了能在浏览器中安全的工作，建议改用迭代，Memorization或两者结合使用。





1. for,while和do-while循环性能特性相似，所以没有一种循环类型明显快于或慢于其他类型。
2. 避免使用for-in循环，除非你需要遍历一个属性数量未知的对象。
3. 改善循环性能的最佳方法是减少每次迭代的计算量和减少循环迭代次数。
4. 通常来说，switch总是比if-else快，但并不总是最佳解决方案。
5. 在判断条件较多时，使用查找表比if-else和switch更快。
6. 浏览器的调用栈大小限制了递归算法在Javascript中的应用；栈溢出错误会导致其他代码中断运行。
7. 如果你遇到栈溢出错误，可将方法改为迭代算法，或使用Memorization来避免重复计算。

运行的代码数量越大，使用这些策略所带来的性能提升也就越明显。






